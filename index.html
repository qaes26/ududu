<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£ÙˆØªØ§Ø± Ø§Ù„Ù†Ø¨Ø¶ - Ø±Ù†Ø¯Ø§</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Aref+Ruqaa:wght@400;700&family=Cairo:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #050505;
            background-image: radial-gradient(circle at center, #1a1a2e 0%, #000000 100%);
            overflow: hidden;
            font-family: 'Cairo', sans-serif;
            color: #fff;
            touch-action: none; /* Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù„Ù…Ø³ */
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ */
        #message-container {
            position: absolute;
            top: 35%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
            text-align: center;
            z-index: 10;
            pointer-events: none;
        }

        .text-chunk {
            font-family: 'Aref Ruqaa', serif;
            font-size: 2.2rem;
            line-height: 1.8;
            color: #e2e8f0;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
            display: inline-block;
            margin: 0 5px;
        }

        .text-chunk.visible {
            opacity: 1;
            transform: translateY(0);
            text-shadow: 0 0 20px rgba(216, 180, 254, 0.8), 0 0 40px rgba(192, 132, 252, 0.4);
        }

        .highlight {
            color: #d8b4fe;
            font-size: 3rem;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£ÙˆØªØ§Ø± */
        #strings-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40%;
            display: flex;
            justify-content: space-evenly;
            align-items: flex-end;
            padding-bottom: 20px;
            z-index: 20;
            transition: opacity 2s ease;
        }

        .string {
            width: 4px;
            height: 100%;
            background: linear-gradient(to top, rgba(255,255,255,0.1), rgba(216, 180, 254, 0.5), transparent);
            position: relative;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.1s ease;
            box-shadow: 0 0 10px rgba(216, 180, 254, 0.2);
        }

        .string::before {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: rgba(216, 180, 254, 0.2);
            border-radius: 50%;
            filter: blur(5px);
            transition: all 0.3s ease;
        }

        /* Ø§Ù„ØªØ£Ø«ÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„Ø¹Ø²Ù Ø¹Ù„Ù‰ Ø§Ù„ÙˆØªØ± */
        .string.active {
            background: linear-gradient(to top, rgba(255,255,255,0.8), rgba(244, 114, 182, 1), transparent);
            box-shadow: 0 0 30px rgba(244, 114, 182, 0.8), 0 0 60px rgba(216, 180, 254, 0.6);
            width: 6px;
        }

        .string.active::before {
            background: rgba(244, 114, 182, 0.8);
            width: 40px;
            height: 40px;
            filter: blur(10px);
        }

        /* Ù†Ø¨Ø¶Ø© Ø§Ù„Ø¶ÙˆØ¡ Ø§Ù„ØµØ§Ø¹Ø¯Ø© */
        .light-pulse {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 15px;
            height: 40px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 20px #fff, 0 0 40px #f472b6;
            opacity: 0;
            pointer-events: none;
        }

        @keyframes shootUp {
            0% { bottom: 0; opacity: 1; transform: translateX(-50%) scale(1); }
            100% { bottom: 100%; opacity: 0; transform: translateX(-50%) scale(0.2); }
        }

        /* ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        #instruction {
            position: absolute;
            bottom: 45%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 2px;
            animation: pulseText 2s infinite;
            pointer-events: none;
            transition: opacity 1s ease;
        }

        @keyframes pulseText {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        /* Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ */
        #signature {
            position: absolute;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Cairo', sans-serif;
            font-size: 1.1rem;
            color: #fbbf24;
            opacity: 0;
            transition: opacity 3s ease;
            text-align: center;
            border-top: 1px solid rgba(251, 191, 36, 0.3);
            padding-top: 15px;
        }

        #signature.show {
            opacity: 1;
            text-shadow: 0 0 15px rgba(251, 191, 36, 0.6);
        }

        /* Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª Ø§Ù„Ø®Ù„ÙÙŠØ© */
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            pointer-events: none;
        }

        /* Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø´Ø§Ø´Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 600px) {
            .text-chunk { font-size: 1.6rem; }
            .highlight { font-size: 2.2rem; }
            #message-container { top: 30%; }
            #strings-container { height: 45%; }
        }
    </style>
</head>
<body>

    <!-- Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ù…ØªÙ„Ø£Ù„Ø¦Ø© -->
    <canvas id="bg-canvas"></canvas>

    <div id="instruction">Ø§Ù„Ù…Ø³ÙŠ Ø§Ù„Ø£ÙˆØªØ§Ø± Ù„ØªØ¹Ø²ÙÙŠ Ø±Ø³Ø§Ù„ØªÙŠ..</div>

    <div id="message-container"></div>

    <div id="strings-container">
        <!-- Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£ÙˆØªØ§Ø± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
    </div>

    <div id="signature">
        Ø¨ÙƒÙ„ Ø­ÙØ¨ØŒ<br>
        Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚ÙŠØ³ Ø¬Ø§Ø²ÙŠ ğŸ¤
    </div>

    <script>
        // --- 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙˆØª Ø§Ù„Ù…Ø¨ØªÙƒØ± (Web Audio API) ---
        let audioCtx;
        
        // Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª Ù…Ø¶Ø¨ÙˆØ·Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù„Ù… Ø§Ù„Ø®Ù…Ø§Ø³ÙŠ (Pentatonic Scale) 
        // Ù„Ø¶Ù…Ø§Ù† Ø£Ù† Ø£ÙŠ Ø¹Ø²Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø³ÙŠØ´ÙƒÙ„ Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…ØªÙ†Ø§ØºÙ…Ø© ÙˆØ¬Ù…ÙŠÙ„Ø©
        const frequencies = [261.63, 293.66, 329.63, 392.00, 440.00, 523.25, 587.33]; 

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        }

        function playTone(freq) {
            if (!audioCtx) return;
            
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            const filter = audioCtx.createBiquadFilter();

            // Ù†ÙˆØ¹ Ø§Ù„ØµÙˆØª: Ù†Ø§Ø¹Ù… ÙˆØ­Ø§Ù„Ù… (Sine wave mixed with triangle feeling)
            osc.type = 'sine';
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);

            // Ø¥Ø¶Ø§ÙØ© ÙÙ„ØªØ± Ù„Ø¬Ø¹Ù„Ù‡ Ø£Ø¹Ù…Ù‚
            filter.type = 'lowpass';
            filter.frequency.value = 1000;

            // Ù‡Ù†Ø¯Ø³Ø© ØµØ¯Ù‰ Ø§Ù„ØµÙˆØª (Envelope)
            gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
            // Ù‡Ø¬ÙˆÙ… Ø³Ø±ÙŠØ¹ (Attack)
            gainNode.gain.linearRampToValueAtTime(0.6, audioCtx.currentTime + 0.05);
            // ØªÙ„Ø§Ø´ÙŠ Ø¨Ø·ÙŠØ¡ Ø¬Ø¯Ø§Ù‹ ÙƒØ£Ù†Ù‡ Ø¨ÙŠØ§Ù†Ùˆ Ø£Ùˆ Ù‚ÙŠØ«Ø§Ø±Ø© Ø³Ø­Ø±ÙŠØ© (Release)
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 3);

            osc.connect(filter);
            filter.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            osc.start();
            osc.stop(audioCtx.currentTime + 3.1);
        }

        // --- 2. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© (Ù…Ø®ØµØµØ© Ù„Ù€ Ø±Ù†Ø¯Ø§) ---
        const messageParts = [
            "<span class='highlight'>Ø±Ù†Ø¯Ø§..</span><br>",
            "Ù„Ù… ØªÙƒÙˆÙ†ÙŠ ÙŠÙˆÙ…Ø§Ù‹ Ù…Ø¬Ø±Ø¯ Ø§Ø³Ù… ÙŠØ¹Ø¨Ø± ÙÙŠ Ø­ÙŠØ§ØªÙŠØŒ<br>",
            "Ø¨Ù„ Ø£Ù†ØªÙ Ø§Ù„Ù†Ø¨Ø¶ Ø§Ù„Ø°ÙŠ ÙŠØ¹Ø²Ù Ø¹Ù„Ù‰ Ø£ÙˆØªØ§Ø± Ù‚Ù„Ø¨ÙŠ.<br>",
            "ÙƒÙ„Ù…Ø§ Ù…Ø±Ù‘ Ø·ÙŠÙÙƒÙ...<br>",
            "ØªØ±Ø§Ù‚ØµØª Ø±ÙˆØ­ÙŠ Ø¹Ù„Ù‰ Ù„Ø­Ù†Ù Ù„Ø§ ÙŠØ³Ù…Ø¹Ù‡ Ø³ÙˆØ§ÙƒÙ.<br>",
            "Ø£Ù†ØªÙ Ø§Ù„Ù†ÙˆØ± Ø§Ù„Ø°ÙŠ Ø£Ø¶Ø§Ø¡ Ø¹ØªÙ…Ø© Ø£ÙŠØ§Ù…ÙŠØŒ<br>",
            "ÙˆØ§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„ØªÙŠ Ø£ÙˆØ¯ Ø£Ù† Ø£Ø³ØªÙ…Ø¹ Ø¥Ù„ÙŠÙ‡Ø§...<br>",
            "Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¨Ø¯. âœ¨"
        ];

        let currentMessageIndex = 0;
        const messageContainer = document.getElementById('message-container');
        const instruction = document.getElementById('instruction');
        const stringsContainer = document.getElementById('strings-container');
        const signature = document.getElementById('signature');
        let isLetterComplete = false;

        // --- 3. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø£ÙˆØªØ§Ø± ÙˆØ§Ù„ØªÙØ§Ø¹Ù„ ---
        for (let i = 0; i < 7; i++) {
            const stringDiv = document.createElement('div');
            stringDiv.className = 'string';
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø¨Ø¶Ø© Ø§Ù„Ø¶ÙˆØ¦ÙŠØ© Ù„Ù„ÙˆØªØ±
            const pulse = document.createElement('div');
            pulse.className = 'light-pulse';
            stringDiv.appendChild(pulse);

            // Ø¯Ø§Ù„Ø© Ø§Ù„Ø¹Ø²Ù
            const pluckString = (e) => {
                if(e) e.preventDefault(); // Ù„Ù…Ù†Ø¹ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø¨Ø§Ù„Ù„Ù…Ø³ Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬
                initAudio();
                playTone(frequencies[i]);

                // ØªØ£Ø«ÙŠØ± Ù…Ø±Ø¦ÙŠ Ù„Ù„ÙˆØªØ±
                stringDiv.classList.add('active');
                pulse.style.animation = 'none';
                void pulse.offsetWidth; // Trigger reflow
                pulse.style.animation = 'shootUp 1s ease-out forwards';

                setTimeout(() => stringDiv.classList.remove('active'), 200);

                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                revealNextMessagePart();
            };

            // Ø¯Ø¹Ù… Ø§Ù„Ù…Ø§ÙˆØ³ ÙˆØ§Ù„Ù„Ù…Ø³ (Ù„Ù„Ù‡ÙˆØ§ØªÙ)
            stringDiv.addEventListener('mousedown', pluckString);
            stringDiv.addEventListener('touchstart', pluckString);
            stringDiv.addEventListener('mouseenter', (e) => {
                // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø²Ù Ø¨Ø§Ù„ØªÙ…Ø±ÙŠØ± (glissando) Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø§ÙˆØ³ Ù…Ø¶ØºÙˆØ·Ø§Ù‹
                if (e.buttons === 1) pluckString(e);
            });
            stringDiv.addEventListener('touchmove', (e) => {
                 // Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¹Ø²Ù Ø¨Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¨Ø§Ù„Ø¥ØµØ¨Ø¹
                 const touch = e.touches[0];
                 const element = document.elementFromPoint(touch.clientX, touch.clientY);
                 if(element && element.classList.contains('string') && element !== stringDiv) {
                     // Ø³ÙŠØªÙ… Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡Ø§ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø¢Ø®Ø±
                 }
            });

            stringsContainer.appendChild(stringDiv);
        }

        // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù…Ø³ØªÙ…Ø± Ø¨Ø§Ù„Ø£ØµØ§Ø¨Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©
        stringsContainer.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const element = document.elementFromPoint(touch.clientX, touch.clientY);
            if(element && element.classList.contains('string')) {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø­Ø¯Ø« Ø§Ù„Ø¶ØºØ· Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù†Ø´Ø·Ø§Ù‹ Ø¨Ø§Ù„ÙØ¹Ù„ Ù„Ù„ØªÙˆ
                if(!element.classList.contains('active')) {
                    const event = new Event('touchstart');
                    element.dispatchEvent(event);
                }
            }
        }, { passive: false });

        // --- 4. Ù…Ù†Ø·Ù‚ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø© ---
        function revealNextMessagePart() {
            instruction.style.opacity = '0'; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø²Ù

            if (currentMessageIndex < messageParts.length && !isLetterComplete) {
                const chunk = document.createElement('span');
                chunk.className = 'text-chunk';
                chunk.innerHTML = messageParts[currentMessageIndex];
                messageContainer.appendChild(chunk);
                
                // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…Ø±Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ù€ DOM
                setTimeout(() => chunk.classList.add('visible'), 50);

                currentMessageIndex++;

                // Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                if (currentMessageIndex === messageParts.length) {
                    isLetterComplete = true;
                    setTimeout(() => {
                        stringsContainer.style.opacity = '0'; // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£ÙˆØªØ§Ø±
                        setTimeout(() => {
                            stringsContainer.style.display = 'none';
                            signature.classList.add('show'); // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙˆÙ‚ÙŠØ¹
                        }, 2000);
                    }, 3000);
                }
            }
        }

        // --- 5. Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ø¨Ø³ÙŠØ·Ø© ---
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let stars = [];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        for(let i=0; i<150; i++) {
            stars.push({
                x: Math.random() * width,
                y: Math.random() * height,
                radius: Math.random() * 1.5,
                alpha: Math.random(),
                speed: Math.random() * 0.02
            });
        }

        function drawStars() {
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = '#ffffff';
            stars.forEach(star => {
                ctx.globalAlpha = star.alpha;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.radius, 0, Math.PI*2);
                ctx.fill();
                
                // ÙˆÙ…ÙŠØ¶ Ø§Ù„Ù†Ø¬ÙˆÙ…
                star.alpha += star.speed;
                if(star.alpha > 1 || star.alpha < 0) star.speed *= -1;
            });
            requestAnimationFrame(drawStars);
        }
        drawStars();

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙˆØª Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ù†Ù‚Ø±Ø© ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø© (Ù…ØªØ·Ù„Ø¨ Ù„Ù„Ù…ØªØµÙØ­Ø§Øª)
        document.body.addEventListener('click', initAudio, { once: true });
        document.body.addEventListener('touchstart', initAudio, { once: true });

    </script>
</body>
</html>


